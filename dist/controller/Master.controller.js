sap.ui.define(["com/rg/sd/osc/controller/BaseController","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageBox","sap/m/MessageToast","sap/m/Text","sap/m/RadioButtonGroup","sap/m/RadioButton","sap/ui/model/json/JSONModel"],function(t,e,r,o,a,s,n,i,u){return t.extend("com.rg.sd.osc.controller.Master",{onInit:function(){this.oRouter=this.getOwnerComponent().getRouter();this.oRouter.getRoute("startPage").attachMatched(this.harculus,this);var t=new u({custData:{KUNNR:"",NAME1:""}});this.getView().setModel(t,"cust")},harculus:function(){},onPress:function(){var t=this.getView().byId("idTab");if(t){t.unbindAggregation("items")}var u=this.getView().getModel("ordStatus");u.resetChanges();u.invalidate();u.refresh(true);var d=this.getView().byId("idSo").getValue();if(!d||d.length===0){o.error("oops!please enter correct Sales Document No");return}else{var l=[];l=new e("SODOC",r.EQ,d);var c=new sap.m.ColumnListItem({cells:[new s({text:"{ordStatus>SODOC}"}),new s({text:"{ordStatus>POSNR}"}),new s({text:"{ordStatus>MATNR}"}),new s({text:"{ordStatus>KWMENG}  {ordStatus>MEINS}"}),new s({text:"{ordStatus>RATE}  {ordStatus>CURR}"}),new n({valueState:"Warning",columns:8,select:this.onRadioChange.bind(this),buttons:[new i({text:"INIT",selected:{path:"ordStatus>INTL",formatter:this.myBooleanFormatter}}),new i({text:"REL1",selected:{path:"ordStatus>RELS1",formatter:this.myBooleanFormatter}}),new i({text:"REL2",selected:{path:"ordStatus>RELS2",formatter:this.myBooleanFormatter}}),new i({text:"RELS",selected:{path:"ordStatus>RELS3",formatter:this.myBooleanFormatter}})]})]});this.getView().byId("idTab").bindAggregation("items",{path:"ordStatus>/SODataSet",template:c,templateShareable:false,filters:l,events:{dataReceived:function(t){const e=t.getParameter("error");if(e){o.error("Failed to load SO data from server.");return}const r=t.getParameter("data");if(r&&r.results&&r.results.length>0){this.getView().getModel("cust").setProperty("/custData",{KUNNR:"for Customer:-"+r.results[0].KUNNR,NAME1:"("+r.results[0].NAME1+")"});a.show("wow! Search Document Found")}else{o.error("oops!No record(s) found");return}}.bind(this)}})}},myBooleanFormatter:function(t){return t===true||t==="true"},onSave:function(){var t=[];var e=this.getView().byId("idTab");var r=e.getItems();for(let e=0;e<r.length;e++){var s=r[e].getBindingContext("ordStatus");if(s){var n=s.getObject();t.push(n);n={}}}t.forEach((t,e)=>{this.getView().getModel("ordStatus").create("/SODataSet",t,{groupId:"batchGroup",changeSetId:"set_"+e})});this.getView().getModel("ordStatus").submitChanges({groupId:"batchGroup",success:function(){a.show("All records created successfully!")},error:function(){o.error("Batch create failed")}})},onRadioChange:function(t){var e=t.getSource();var r=e.getBindingContext("ordStatus");if(!r){console.error("No binding context found!");return}var o=r.getPath();var a=r.getModel("ordStatus");var s=e.getSelectedIndex();a.setProperty(o+"/INTL","false");a.setProperty(o+"/RELS1","false");a.setProperty(o+"/RELS2","false");a.setProperty(o+"/RELS3","false");switch(s){case 0:a.setProperty(o+"/INTL","true");break;case 1:a.setProperty(o+"/RELS1","true");break;case 2:a.setProperty(o+"/RELS2","true");break;case 3:a.setProperty(o+"/RELS3","true");break}}})});
//# sourceMappingURL=Master.controller.js.map